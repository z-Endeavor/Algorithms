# 7-环形链表

**相关题目：**

- [142.环形链表]: #环形链表

  

142. ## 环形链表

给定一个链表的头节点  `head` ，返回链表开始入环的第一个节点。 *如果链表无环，则返回 `null`* 。

如果链表中有某个节点，可以通过连续跟踪 `next` 指针再次到达，则链表中存在环。 为了表示给定链表中的环，评测系统内部使用整数 `pos` 来表示链表尾连接到链表中的位置（**索引从 0 开始**）。如果 `pos` 是 `-1`，则在该链表中没有环。**注意：`pos` 不作为参数进行传递**，仅仅是为了标识链表的实际情况。

**不允许修改** 链表。

**示例1：**

```
输入：head = [3,2,0,-4], pos = 1
输出：返回索引为 1 的链表节点
解释：链表中有一个环，其尾部连接到第二个节点。
```

**示例2：**

```
输入：head = [1,2], pos = 0
输出：返回索引为 0 的链表节点
解释：链表中有一个环，其尾部连接到第一个节点。
```

**示例3：**

```
输入：head = [1], pos = -1
输出：返回 null
解释：链表中没有环。
```

**提示：**

- 链表中节点的数目范围在范围 `[0, 104]` 内
- `-105 <= Node.val <= 105`
- `pos` 的值为 `-1` 或者链表中的一个有效索引

**进阶：**你是否可以使用 `O(1)` 空间解决此题？



### 思路

这题主要包含两个方面：

1. 判断链表是否有环
2. 如果有环，怎么找到这个环的入口

#### 判断链表是否有环

用**快慢指针法**，分别定义 fast 和 slow 指针，从头结点出发。fast 指针每次移动**两个**节点， slow 指针每次移动**一个**节点。

- 首先 fast 指针一定先进入环中，如果 fast 指针和 slow 指针相遇的话，一定是**在环中相遇**的。
- 而在环中，相对于 slow 来说，可以看作**fast是一个节点一个节点的靠近slow**的，所以 fast 一定可以和 slow 重合。

因此，若 **fast 指针和 slow 指针在途中相遇**，则链表有环；如果 **fast 遇到 null**，则链表中无环。

#### 如何找环的入口

当快慢指针相遇时，假设 slow 走了 `k` 步，则 fast 走了 `2k` 步。

假设相遇点距环的起点为 `m`，此时可以发现：

- 相遇点在环中走 `k` 步，可以回到相遇点，因此**相遇点到环的起点的距离**为 `k - m`
- 而链表**头结点 head 到环的起点的距离**易得也为 `k - m`

 因此，**将其中一个指针指向头结点 head ，然后两个指针同速前进，相遇之处即为环的起点。**

